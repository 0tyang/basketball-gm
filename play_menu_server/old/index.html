<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
    google.load("jquery", "1.7.1");
    function socket_play_menu(league_id, season, status_t, options_t) {
        $play_status = $('#play_status')
        $play_button = $('#play_button')
        status_t = typeof status_t !== 'undefined' ? status_t : 0;
        options_t = typeof options_t !== 'undefined' ? options_t : 0;


        $.ajax({
	        type: 'GET',
	        url: url,
	        cache: false,
            data: {league_id: league_id, season: season, status_t: status_t, options_t: options_t},
	        success: function(data) {
                var json = JSON.parse(data);
                status_t = json['status_t'];
                options_t = json['options_t'];
                if (json['status'] != '') {
        		    $play_status.html(json['status']);
                }
                if (json['button'] != '') {
        		    $play_button.html(json['button']);
                }
		        setTimeout('comet_play_menu(\'' + url + '\', ' + status_t + ', ' + options_t + ')', 1000);
	        },
	        error: function(XMLHttpRequest, textstatus, error) {
		        setTimeout('comet_play_menu(\'' + url + '\')', 15000);
	        }		
        });
    }
  var socket = io.connect('http://127.0.0.1:1337/');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });

    $(document).ready(function() {
/*        var socket = io.connect('http://localhost');
        socket.on('news', function (data) {
            console.log(data);
            socket.emit('my other event', { my: 'data' });
        });*/
//        socket_play_menu('{{ url_for('play_menu_', league_id=league_id) }}');
    });
</script>

<div id="play_status">play status</div>

<div id="play_button">play button</div>
